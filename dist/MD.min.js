!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).MD=e()}(this,(function(){"use strict";function t(e,n){return(t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(e,n)}function e(n,i,r){return(e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()?Reflect.construct:function(e,n,i){var r=[null];r.push.apply(r,n);var s=new(Function.bind.apply(e,r));return i&&t(s,i.prototype),s}).apply(null,arguments)}function n(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];var s=e(Date,i);return Object.setPrototypeOf(s,n.prototype),s}var i={_x:function(t){return("0"+t).slice(-2)},get a(){return this.hour>=12?"pm":"am"},get A(){return this.a.toUpperCase()},get g(){return this.hour%12||12},get G(){return this.hour},get h(){return this._x(this.g)},get H(){return this._x(this.hour)},get i(){return this._x(this.minute)},get s(){return this._x(this.second)},get j(){return this.day},get d(){return this._x(this.day)},get n(){return this.month},get m(){return this._x(this.month)},get Y(){return this.year},get y(){return(""+this.Y).substr(2,2)}};function r(t,e){var n=t.value;return this.init(t,n,e)}return Object.setPrototypeOf(n.prototype,Date.prototype),Object.assign(n.prototype,{getMyMount:function(){return this.getMonth()+1},addYear:function(t){return this.setYear(this.getFullYear()+t),this},addMonth:function(t){return this.setMonth(this.getMonth()+t),this},addDays:function(t){return this.setTime(this.getTime()+864e5*t),this},addHours:function(t){return this.setTime(this.getTime()+36e5*t),this},addMinutes:function(t){return this.setTime(this.getTime()+6e4*t),this},addSeconds:function(t){return this.setTime(this.getTime()+1e3*t),this},to_str:function(t){t=t||"Y-m-d H:i:s";for(var e={day:this.getDate(),month:this.getMonth()+1,year:this.getFullYear(),hour:this.getHours(),minute:this.getMinutes(),second:this.getSeconds()},n=Object.assign(i,e),r="",s=t.length,a=0;a<s;a++){var u=t[a];r+=u in n?n[u]:u}return r}}),r.SubDate=n,Object.assign(r.prototype,{init:function(t,e,i){return this.params=function(){for(var t={},e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];for(var r=function(){var e=a[s];Object.keys(e).forEach((function(n){t[n]=e[n]}))},s=0,a=n;s<a.length;s++)r();return t}({},i),this.input=t,this.ts=new n(e),this.list_dom={},this.list_attr={y:{get:"getFullYear",set:"addYear"},m:{get:"getMyMount",set:"addMonth"},d:{get:"getDate",set:"addDays"},h:{get:"getHours",set:"addHours"},i:{get:"getMinutes",set:"addMinutes"},s:{get:"getSeconds",set:"addSeconds"}},i.type&&"date"==i.type?(delete this.list_attr.h,delete this.list_attr.i):i.type&&"time"==i.type&&(delete this.list_attr.y,delete this.list_attr.m,delete this.list_attr.d),this.createDOM(),this.eventsListner(),this},eventsListner:function(){var t=this;function e(e){var n=e.target.parentNode;if(n.classList.contains("e")){var i=e.wheelDelta>0?1:-1;e.preventDefault(),t.update(n.getAttribute("data-id"),i)}}return t.element.addEventListener("click",(function(e){var n=e.target,i=e.target.parentNode.getAttribute("data-id");n.classList.contains("up")?t.update(i,1):n.classList.contains("down")&&t.update(i,-1)}),!1),t.element.addEventListener("mousewheel",e,{passive:!1}),t.element.addEventListener("DOMMouseScroll",e,{passive:!1}),t},highlight:function(t){t.classList.remove("highlight"),t.offsetWidth,t.classList.add("highlight")},update:function(t,e){return this.ts[this.list_attr[t].set](e),this.view()},view:function(){var t=this;return Object.keys(t.list_attr).forEach((function(e){t.list_dom[e].innerHTML=t.ts[t.list_attr[e].get]()})),t.input.value=t.ts.to_str(t.params&&t.params.pattern),t},createDOM:function(){var t=this,e=document.createElement("div");e.classList.add("yjsdate"),e.classList.add("clearfix");var n=t.createCell();return Object.keys(t.list_attr).forEach((function(i){var r=n.cloneNode(!0),s=r.getElementsByClassName("val")[0];r.setAttribute("data-id",i),e.appendChild(r),t.list_dom[i]=s})),t.input.parentNode.insertBefore(e,t.input.nextSibling),t.element=e,t},createCell:function(){var t=document.createElement("div");t.className="e";var e=document.createElement("div");e.className="up",e.innerHTML="+",t.appendChild(e);var n=document.createElement("div");n.className="val",t.appendChild(n);var i=document.createElement("div");return i.className="down",i.innerHTML="-",t.appendChild(i),t}}),r}));
